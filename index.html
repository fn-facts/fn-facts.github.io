<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <!--<link rel="stylesheet" href="css/main.css">-->

</head>
<body>
  <style>

    * {
      font-family: sans-serif;
    }

    h1 {
      text-align:center;
    }

    .wrapper {
      max-width: 900px;
      margin:auto;
    }

    .canvas-wrapper {
      max-width: 500px;
      margin:auto;
    }

    .sources {
      text-align: center;
    }

    footer {
      text-align: center;
    }

  </style>
  <div class="wrapper">
    <h1>Évolution des votes du Front National au <strong>premier tour</strong> des Présidentielles de 1988 à 2017</h1>
    <div class="canvas-wrapper">
      <canvas height="300px" id="myChart"></canvas>
    </div>

<p class="sources">Source: <a href="http://www.interieur.gouv.fr/Elections/Les-resultats/">http://www.interieur.gouv.fr/Elections/Les-resultats/</a></p>
<footer>Réalisé par <a href="http://yineo.fr">Yineo</a></footer>
  </div>





  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>
  <script>

    var ctx = document.getElementById("myChart");

    var datasLabels = {
      abstention_pourcentage:"Pourcentage d'abstention",
      vote_fn_pourcentage_exprimes:"Pourcentage des votes FN sur le total des votes exprimés",
      vote_fn_pourcentage_inscrits:"Pourcentage des votes FN sur le total des votants inscrits",
      blancs_nuls_pourcentage:"Pourcentage des votes blancs et nuls",
      blancs_nuls_abstention_pourcentage:"Pourcentage des votes blancs, nuls et abstention",
    }

    var datas = {
      1988:{
        abstention_pourcentage:18.65,
        vote_fn_pourcentage_exprimes:14.38,
        vote_fn_pourcentage_inscrits: 11.48,
        blancs_nuls_pourcentage: 1.63,
        blancs_nuls_abstention_pourcentage:20.28
      },
      1995:{
        abstention_pourcentage:21.62,
        vote_fn_pourcentage_exprimes:15.01,
        vote_fn_pourcentage_inscrits:11.43,
        blancs_nuls_pourcentage: 2.21,
        blancs_nuls_abstention_pourcentage: 23.83
      },
      2002:{
        abstention_pourcentage:28.40,
        vote_fn_pourcentage_exprimes:16.86,
        vote_fn_pourcentage_inscrits:11.66,
        blancs_nuls_pourcentage: 2.42,
        blancs_nuls_abstention_pourcentage: 30.82
      },
      2007:{
        abstention_pourcentage:16.23,
        vote_fn_pourcentage_exprimes:10.44,
        vote_fn_pourcentage_inscrits:8.62,
        blancs_nuls_pourcentage: 1.20,
        blancs_nuls_abstention_pourcentage: 17.43
      },
      2012:{
        abstention_pourcentage:20.52,
        vote_fn_pourcentage_exprimes:17.88,
        vote_fn_pourcentage_inscrits:13.94,
        blancs_nuls_pourcentage: 1.52,
        blancs_nuls_abstention_pourcentage: 22.04
      },
      2017:{
        abstention_pourcentage:22.23,
        vote_fn_pourcentage_exprimes:21.30,
        vote_fn_pourcentage_inscrits:16.14,
        blancs_nuls_pourcentage: 2.00,
        blancs_nuls_abstention_pourcentage: 24.23
      }
    };

    var labels = [];
    var datasets = {
      abstention_pourcentage:{
        label:"Abstention",
        data:[]
      },
      vote_fn_pourcentage_exprimes:{
        label:"Vote en % des exprimés",
        borderColor: "rgba(75,192,192,1)",
        backgroundColor: "rgba(75,192,192,0.4)",
        data:[]
      },
      vote_fn_pourcentage_inscrits:{
        label:"Vote en % des inscrits",
        borderColor: "rgba(50,100,192,1)",
        backgroundColor: "rgba(50,100,192,0.5)",
        data:[]
      }
    }

    for (var year in datas ) {
      labels.push(year);
      for (key in datas[year]) {
        if (datasets[key] !== undefined) {
          datasets[key].label = datasLabels[key];
          datasets[key].data.push(datas[year][key]);
        }
      }
    }

    // construction de l'objet data à passer à chartJS
    var data = {
      labels:labels,
      datasets:[]
    };
    for (var key in datasets) {
      data.datasets.push(datasets[key]);
    }

    var myLineChart = new Chart(ctx, {
      type: 'line',
      data: data
    });

  </script>

</body>
</html>
